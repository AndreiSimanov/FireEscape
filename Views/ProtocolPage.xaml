<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:dx="clr-namespace:DevExpress.Maui.Core;assembly=DevExpress.Maui.Core"
             xmlns:dxe="clr-namespace:DevExpress.Maui.Editors;assembly=DevExpress.Maui.Editors"
             xmlns:dxco="clr-namespace:DevExpress.Maui.Controls;assembly=DevExpress.Maui.Controls"
             xmlns:lang="clr-namespace:FireEscape.Resources.Languages"
             xmlns:model="clr-namespace:FireEscape.Models"
             xmlns:viewmodel="clr-namespace:FireEscape.ViewModels"
             x:Class="FireEscape.Views.ProtocolPage"
             Title="{x:Static lang:AppResources.ProtocolPageTitle}"
             x:DataType="viewmodel:ProtocolViewModel"
             Disappearing="ContentPage_Disappearing">

    <ScrollView BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}">
        <Grid RowDefinitions="Auto,Auto,*">
            <VerticalStackLayout>
                <Grid HorizontalOptions="Center" RowDefinitions="Auto,Auto,Auto">
                    <Border 
                        StrokeShape="RoundRectangle 80"
                        Stroke="White"
                        StrokeThickness="10"
                        HeightRequest="172"
                        WidthRequest="172"
                        Margin="0,8,0,0"
                        HorizontalOptions="Center"
                        VerticalOptions="Center">
                        <Image 
                            Source="{Binding  Protocol.Image}"
                            Aspect="AspectFill"
                            WidthRequest="180"
                            HeightRequest="180"
                            HorizontalOptions="Center"
                            VerticalOptions="Center">
                       </Image>
                    </Border>
                    <dx:DXButton
                        Content="{x:Static lang:AppResources.MakePhotoHint}"
                        Command="{Binding AddProtocolPhotoCommand}" 
                        Grid.Row="2" 
                        Icon="ic_photo"
                        Margin="0,10,0,0"  
                        IconHeight="22" 
                        IconWidth="22">
                    </dx:DXButton>
                </Grid>
            </VerticalStackLayout>
           
            <VerticalStackLayout Grid.Row="2" Padding="5" Spacing="5" Margin="10" >

                <dxe:NumericEdit
                    Value="{Binding Protocol.ProtocolNum}"
                    SelectValueOnFocus="True"
                    MinValue="1"
                    MaxValue="10000"
                    MaxDecimalDigitCount="0"
                    TextHorizontalAlignment="Start"
                    PlaceholderText="{x:Static lang:AppResources.ProtocolNum}"
                    LabelText="{x:Static lang:AppResources.ProtocolNum}" 
                    ReturnType="Next"
                    Margin="10,10,10,0"/>

                <dxe:DateEdit
                    Date="{Binding Protocol.ProtocolDate}"                    
                    LabelText="{x:Static lang:AppResources.ProtocolDate}"
                    DisplayFormat="d"
                    IsEndIconVisible="True"
                    VerticalOptions="Center"
                    ReturnType="Next"
                    Margin="10,10,10,0"/>

                <dxe:TextEdit
                    Text="{Binding Protocol.Location}"
                    LabelText="{x:Static lang:AppResources.Location}"
                    PlaceholderText="{x:Static lang:AppResources.LocationHint}"
                    ReturnType="Next"
                    Margin="10,10,10,0"/>

                <dxe:TextEdit
                    Text="{Binding Protocol.Address}"
                    LabelText="{x:Static lang:AppResources.Address}"
                    PlaceholderText="{x:Static lang:AppResources.AddressHint}"
                    ReturnType="Next"
                    Margin="10,10,10,0"/>

                <dxe:NumericEdit
                    Value="{Binding Protocol.FireEscapeNum}"
                    SelectValueOnFocus="True"
                    MinValue="1"
                    MaxValue="10000"
                    ReturnType="Next"
                    MaxDecimalDigitCount="0"
                    TextHorizontalAlignment="Start"
                    PlaceholderText="{x:Static lang:AppResources.FireEscapeNum}"
                    LabelText="{x:Static lang:AppResources.FireEscapeNum}" 
                    Margin="10,10,10,0"/>

                <dxe:TextEdit
                    Text="{Binding Protocol.FireEscapeObject}"
                    LabelText="{x:Static lang:AppResources.FireEscapeObject}"
                    PlaceholderText="{x:Static lang:AppResources.FireEscapeObjectHint}"
                    ReturnType="Next"
                    Margin="10,10,10,0"/>

                <dxe:TextEdit
                    Text="{Binding Protocol.Customer}"
                    LabelText="{x:Static lang:AppResources.Customer}"
                    PlaceholderText="{x:Static lang:AppResources.CustomerHint}"
                    ReturnType="Next"
                    Margin="10,10,10,0"/>

                <dxco:SimpleButton
                    Text="{x:Static lang:AppResources.FireEscapePageTitle}" 
                    Command="{Binding GoToDetailsCommand}" 
                    IsEnabled="{Binding IsNotBusy}" 
                    Margin="10,20,10,0"/>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>